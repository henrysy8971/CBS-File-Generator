##################################################
# Application Configuration
##################################################
spring.application.name=cbs-file-generator
server.port=${SERVER_PORT:8080}                      # Default port 8080 if not set
server.servlet.context-path=/cbs-file-generator
##################################################
# JPA / Hibernate Configuration
##################################################
spring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect
spring.jpa.hibernate.ddl-auto=none                   # Production: do not auto-create tables
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
# Ensure Hibernate doesn't try to be too smart with Oracle LOBs
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
##################################################
# DataSource (Oracle) Configuration
##################################################
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.datasource.url=jdbc:oracle:thin:@${DB_HOST:localhost}:${DB_PORT:1521}:${DB_SID:CBSDEVPDB}
spring.datasource.username=${DB_USERNAME:CBSDEV}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.type=com.zaxxer.hikari.HikariDataSource
# HikariCP Settings (Optimized)
spring.datasource.hikari.minimum-idle=${DS_MIN_IDLE:5}
spring.datasource.hikari.maximum-pool-size=${DS_MAX_POOL:30}
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
# Hikari Performance: Faster startup by not validating on every connection if JDBC4
spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL
##################################################
# Spring Batch Configuration
##################################################
spring.batch.job.enabled=false
spring.batch.initialize-schema=never                # Production: assume tables exist
##################################################
# Quartz Scheduler Configuration
##################################################
spring.quartz.properties.org.quartz.scheduler.instanceName=CBSFileGenerator
spring.quartz.properties.org.quartz.scheduler.instanceId=AUTO
spring.quartz.properties.org.quartz.threadPool.class=org.quartz.simpl.SimpleThreadPool
spring.quartz.properties.org.quartz.threadPool.threadCount=${QUARTZ_THREAD_COUNT:10}
spring.quartz.properties.org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX
spring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.oracle.OracleDelegate
spring.quartz.properties.org.quartz.jobStore.useProperties=true
spring.quartz.properties.org.quartz.jobStore.tablePrefix=QRTZ_
spring.quartz.properties.org.quartz.jobStore.isClustered=${QUARTZ_CLUSTERED:false}
##################################################
# Custom Async / Batch Thread Pool Settings
# (Used by your @Value annotations in AsyncConfig/BatchInfrastructureConfig)
##################################################
# Thread Pool: Ensure Batch/Async pools match your DB max-pool-size (20)
# (Total Threads should be slightly less than Max DB Connections)
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=async-task-
##################################################
# File Generation Logic Settings
##################################################
file.generation.output-directory=${FILE_OUTPUT_DIR:/opt/cbs/generated-files/}
file.generation.archive-directory=${FILE_ARCHIVE_DIR:/opt/cbs/archived-files/}
file.generation.temp-directory=${FILE_TEMP_DIR:/opt/cbs/temp-files/}
file.generation.log-directory=${FILE_LOG_DIR:/opt/cbs/logs/}
file.generation.chunk-size=${FILE_CHUNK_SIZE:1000}
file.generation.thread-count=${FILE_THREAD_COUNT:10}
file.generation.max-file-size=${FILE_MAX_SIZE:100MB}
file.generation.max-file-age-in-days=${FILE_MAX_AGE_IN_DAYS:30}
##################################################
# Validation & Auth
##################################################
validation.xsd.schema-location=classpath:xsd/
validation.xsd.strict-mode=false
auth.token.header-name=${AUTH_TOKEN_HEADER:X-DB-Token}
auth.token.enable-validation=${AUTH_TOKEN_VALIDATION:true}
app.config.cache-refresh-interval-ms=300000
##################################################
# Logging
##################################################
logging.level.root=INFO
logging.level.com.silverlakesymmetri.cbs.fileGenerator=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file=${LOG_DIR:logs}/cbs-file-generator.log
##################################################
# Actuator (Refactored for Spring Boot 1.5.x)
##################################################
management.context-path=/actuator
management.security.enabled=false
endpoints.enabled=false
endpoints.health.enabled=true
endpoints.info.enabled=true
##################################################
# Scheduler Settings
##################################################
# Poll every 1 minute for new file generation requests (Used by StartupRunner)
batch.scheduler.cron=0 0/1 * * * ?
# Run system maintenance (CleanupTasklet) every Sunday at midnight
maintenance.scheduler.cron=0 0 0 * * SUN
##################################################
# File Integrity (Used by FileFinalizationService)
##################################################
# POSIX permissions for finalized files (if on Linux)
file.generation.permissions=rw-r--r--
